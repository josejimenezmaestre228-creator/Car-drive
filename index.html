<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drive Zone Prototype</title>
<style>
  body { margin:0; background:#333; display:flex; justify-content:center; align-items:center; height:100vh; }
  canvas { background:#4CAF50; display:block; border:3px solid #000; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const car = { x:400, y:500, width:40, height:70, speed:0, angle:0 };
const keys = {};
const coins = [
  {x:200, y:200},
  {x:600, y:400},
  {x:400, y:100}
];
let score = 0;

document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

function update() {
    // Control
    if(keys['ArrowUp'] || keys['w']) car.speed += 0.2;
    if(keys['ArrowDown'] || keys['s']) car.speed -= 0.2;
    if(keys['ArrowLeft'] || keys['a']) car.angle -= 0.05;
    if(keys['ArrowRight'] || keys['d']) car.angle += 0.05;
    
    // Friction
    car.speed *= 0.95;
    
    // Move
    car.x += Math.sin(car.angle)*car.speed;
    car.y -= Math.cos(car.angle)*car.speed;
    
    // Boundaries
    if(car.x<20) car.x=20;
    if(car.x>canvas.width-20) car.x=canvas.width-20;
    if(car.y<20) car.y=20;
    if(car.y>canvas.height-20) car.y=canvas.height-20;
    
    // Coin collision
    for(let i=coins.length-1;i>=0;i--){
        const c = coins[i];
        const dx = car.x - c.x;
        const dy = car.y - c.y;
        if(Math.sqrt(dx*dx + dy*dy) < 30){
            coins.splice(i,1);
            score++;
        }
    }
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    
    // Draw coins
    ctx.fillStyle='yellow';
    coins.forEach(c=>{
        ctx.beginPath();
        ctx.arc(c.x,c.y,15,0,Math.PI*2);
        ctx.fill();
    });
    
    // Draw car
    ctx.save();
    ctx.translate(car.x,car.y);
    ctx.rotate(car.angle);
    ctx.fillStyle='red';
    ctx.fillRect(-car.width/2,-car.height/2,car.width,car.height);
    ctx.restore();
    
    // Score
    ctx.fillStyle='white';
    ctx.font='20px Arial';
    ctx.fillText('Monedas: '+score,10,30);
}

function gameLoop(){
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>