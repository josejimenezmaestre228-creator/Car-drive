<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drive Zone Test</title>
<style>
  body { margin:0; display:flex; justify-content:center; align-items:center; height:100vh; background:#333; }
  canvas { background:#4CAF50; border:2px solid #000; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let car = { x:400, y:500, w:40, h:70, angle:0, speed:0 };
let coins = [
  {x:200, y:200}, {x:600, y:400}, {x:400, y:100}
];
let keys = {};
let score = 0;

document.addEventListener('keydown', e => keys[e.key]=true);
document.addEventListener('keyup', e => keys[e.key]=false);

function update() {
    // Movimiento
    if(keys['ArrowUp'] || keys['w']) car.speed += 0.3;
    if(keys['ArrowDown'] || keys['s']) car.speed -= 0.3;
    if(keys['ArrowLeft'] || keys['a']) car.angle -= 0.05;
    if(keys['ArrowRight'] || keys['d']) car.angle += 0.05;

    car.speed *= 0.95;
    car.x += Math.sin(car.angle) * car.speed;
    car.y -= Math.cos(car.angle) * car.speed;

    // Colisiones con bordes
    car.x = Math.max(20, Math.min(canvas.width-20, car.x));
    car.y = Math.max(20, Math.min(canvas.height-20, car.y));

    // Recoger monedas
    coins = coins.filter(c=>{
        let dx = car.x - c.x;
        let dy = car.y - c.y;
        if(Math.sqrt(dx*dx + dy*dy) < 30){
            score++;
            return false;
        }
        return true;
    });
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Dibujar monedas
    ctx.fillStyle='yellow';
    coins.forEach(c=>{
        ctx.beginPath();
        ctx.arc(c.x, c.y, 15, 0, Math.PI*2);
        ctx.fill();
    });

    // Dibujar coche
    ctx.save();
    ctx.translate(car.x, car.y);
    ctx.rotate(car.angle);
    ctx.fillStyle='red';
    ctx.fillRect(-car.w/2, -car.h/2, car.w, car.h);
    ctx.restore();

    // Puntos
    ctx.fillStyle='white';
    ctx.font='20px Arial';
    ctx.fillText('Monedas: '+score, 10, 30);
}

function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>